<div class="index-section{% if section.settings.alt %} index-section--alt{% endif %}">

  <div
    class="page-width text-{{ section.settings.align_text }}"
    data-section-id="{{ section.id }}"
    data-section-type="testimonials">
    {% if section.settings.title != blank %}
      <header class="section-header" data-aos>
        <h2 class="section-header__title appear-delay">
          {{ section.settings.title | escape }}
        </h2>
      </header>
    {% endif %}

    {% if section.blocks.size > 0 %}
      <div class="testimonials-grid">
        {% for block in section.blocks %}
          <div class="testimonial-card" data-aos {{ block.shopify_attributes }}>
            <span class="testimonial-card__quote">
              <svg aria-hidden="true" focusable="false" viewBox="0 0 41 35" width="24" height="24">
                <path d="M10.208 17.711h6.124v16.332H0V21.684C0 8.184 5.444.956 16.332 0v6.125c-4.083 1.14-6.124 4.414-6.124 9.82v1.766zm24.498 0h6.124v16.332H24.498V21.684C24.498 8.184 29.942.956 40.83 0v6.125c-4.083 1.14-6.124 4.414-6.124 9.82v1.766z" fill="#9CAF88" fill-opacity="0.25" fill-rule="evenodd"/>
              </svg>
            </span>
            {% if block.settings.testimonial != blank %}
              <div class="testimonial-card__text">{{ block.settings.testimonial }}</div>
            {% endif %}
            {% if block.settings.author != blank %}
              <cite class="testimonial-card__author">{{ block.settings.author | escape }}</cite>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  </div>

</div>

<style>
.testimonials-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  margin-top: 30px;
}

.testimonial-card {
  background: #ffffff;
  border-left: 4px solid #9CAF88;
  padding: 25px;
  border-radius: 0 8px 8px 0;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);
  display: flex;
  flex-direction: column;
  text-align: left;
}

.testimonial-card__quote {
  margin-bottom: 15px;
}

.testimonial-card__text {
  flex-grow: 1;
  font-size: 15px;
  line-height: 1.6;
  color: #3D3632;
  margin-bottom: 15px;
}

.testimonial-card__text p {
  margin: 0;
}

.testimonial-card__author {
  font-style: normal;
  font-weight: 600;
  color: #9CAF88;
  font-size: 14px;
  letter-spacing: 0.03em;
}

@media screen and (max-width: 990px) {
  .testimonials-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media screen and (max-width: 590px) {
  .testimonials-grid {
    grid-template-columns: 1fr;
  }

  .testimonial-card {
    padding: 18px 20px;
  }

  .testimonial-card__quote svg {
    width: 20px;
    height: 20px;
  }

  .testimonial-card__text {
    font-size: 14px;
    margin-bottom: 12px;
  }

  .testimonial-card__quote {
    margin-bottom: 12px;
  }
}
</style>

{% schema %}
  {
    "name": "Testimonials",
    "max_blocks": 10,
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Heading",
        "default": "Testimonials"
      },
      {
        "type": "select",
        "id": "align_text",
        "label": "Text alignment",
        "default": "center",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "center",
            "label": "Centered"
          }
        ]
      },
      {
        "type": "checkbox",
        "id": "round_images",
        "label": "Circular images"
      },
      {
        "type": "checkbox",
        "id": "alt",
        "label": "Use alternate section color"
      }
    ],
    "blocks": [
      {
        "type": "testimonial",
        "name": "Testimonial",
        "settings": [
          {
            "type": "richtext",
            "id": "testimonial",
            "label": "Text",
            "default": "<p>Add customer reviews and testimonials to showcase your storeâ€™s happy customers.</p>"
          },
          {
            "type": "image_picker",
            "id": "image",
            "label": "Author's image"
          },
          {
            "type": "text",
            "id": "author",
            "label": "Author",
            "default": "Author's name"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Testimonials",
        "category": "Text",
        "blocks": [
          {
            "type": "testimonial"
          },
          {
            "type": "testimonial"
          }
        ]
      }
    ]
  }
{% endschema %}
